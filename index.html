<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>å¨å¿—çš„ AR æ•¸ä½åç‰‡</title>
    <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
    
    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/3.3.2/aframe/build/aframe-ar.js"></script>
    
    <style>
      /* å³å´å½ˆå‡ºå¼é¸å–®ä»‹é¢è¨­è¨ˆ */
      #ui-menu {
        position: absolute;
        top: 50%;
        right: 15px;
        transform: translateY(-50%);
        z-index: 9999;
        display: flex;
        flex-direction: column;
        gap: 15px;
      }
      
      .menu-btn {
        background: rgba(0, 0, 0, 0.75);
        color: #ffffff;
        border: 1px solid rgba(255, 255, 255, 0.5);
        padding: 12px 20px;
        border-radius: 8px;
        font-family: 'Microsoft JhengHei', sans-serif;
        font-weight: bold;
        font-size: 16px;
        text-align: center;
        backdrop-filter: blur(4px);
        cursor: pointer;
        box-shadow: 0 4px 6px rgba(0,0,0,0.3);
        transition: transform 0.2s ease, background 0.2s ease;
        user-select: none;
      }

      .menu-btn:active {
        transform: scale(0.92);
        background: rgba(80, 80, 80, 0.9);
      }
    </style>
  </head>

  <body style="margin: 0; overflow: hidden;">
    
    <div id="ui-menu">
      <div class="menu-btn" onclick="showCard()">ğŸ–¼ï¸ æˆ‘çš„åç‰‡</div>
      <div class="menu-btn" onclick="window.open('https://tim6404.github.io/design-works/', '_blank')">ğŸŒ å€‹äººç°¡ä»‹</div>
      <div class="menu-btn" onclick="window.open('https://youtu.be/s9_33EVIjTE?si=Fv1qheLwAIIatRGJ', '_blank')">ğŸ¥ æ•¸ä½äººä»‹ç´¹</div>
      <div class="menu-btn" onclick="showModel()">ğŸ¤– 3D å±•ç¤º</div>
    </div>

    <a-scene embedded arjs="sourceType: webcam; debugUIEnabled: false;" renderer="logarithmicDepthBuffer: true;" vr-mode-ui="enabled: false">
      
      <a-assets>
        <img id="card-img" src="my-card.jpg">
        <a-asset-item id="robot-model" src="robot.glb"></a-asset-item>
      </a-assets>

      <a-marker type="pattern" url="WEI.patt" emitevents="true" id="ar-marker" smooth="true" smoothCount="10" smoothTolerance="0.01" smoothThreshold="5">
        
        <a-image id="card-entity" 
                 src="#card-img" 
                 width="1.5" height="1" 
                 rotation="-90 0 0" 
                 visible="false"
                 animation="property: position; from: -0.15 0 0; to: 0.15 0 0; dir: alternate; dur: 2000; loop: true; easing: easeInOutSine">
        </a-image>

        <a-entity id="model-entity" 
                  gltf-model="#robot-model" 
                  scale="0.15 0.15 0.15" 
                  position="0 0 0.15" 
                  rotation="-90 0 0"
                  visible="false">
        </a-entity>

      </a-marker>
      
      <a-entity camera></a-entity>
    </a-scene>

    <script>
      const card = document.querySelector('#card-entity');
      const model = document.querySelector('#model-entity');
      const marker = document.querySelector('#ar-marker');

      // é»æ“Šã€Œæˆ‘çš„åç‰‡ã€æŒ‰éˆ•çš„åŸ·è¡Œå‹•ä½œ
      function showCard() {
        card.setAttribute('visible', 'true');
        model.setAttribute('visible', 'false');
      }

      // é»æ“Šã€Œ3Då±•ç¤ºã€æŒ‰éˆ•çš„åŸ·è¡Œå‹•ä½œ
      function showModel() {
        card.setAttribute('visible', 'false');
        model.setAttribute('visible', 'true');
      }

      // æƒæåˆ°æ¨™è¨˜æ™‚ï¼Œè‡ªå‹•ç”¢ç”Ÿåç‰‡
      marker.addEventListener('markerFound', () => {
        showCard(); 
      });

      // é›¢é–‹æ¨™è¨˜æ™‚ï¼Œéš±è—æ‰€æœ‰ç‰©ä»¶ç¢ºä¿ç•«é¢ä¹¾æ·¨
      marker.addEventListener('markerLost', () => {
        card.setAttribute('visible', 'false');
        model.setAttribute('visible', 'false');
      });
    </script>
  </body>
</html>
